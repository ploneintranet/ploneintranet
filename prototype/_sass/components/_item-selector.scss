// Foundation by ZURB
// foundation.zurb.com
// Licensed under MIT Open Source

//
// FOUNDATION SETTINGS
//

// This is the default html and body font-size for the base rem value.
// $rem-base: 16px;

// Allows the use of rem-calc() or lower-bound() in your settings
// @import "foundation/functions";

// $experimental: true;

// The default font-size is set to 100% of the browser style sheet (usually 16px)
// for compatibility with browser-based text zoom or user-set defaults.

// Since the typical default browser font-size is 16px, that makes the calculation for grid size.
// If you want your base font-size to be different and not have it affect the grid breakpoints,
// set $rem-base to $base-font-size and make sure $base-font-size is a px value.
$base-font-size: 100%;

// The $base-font-size is 100% while $base-line-height is 150%
$base-line-height: 150%;

// We use this to control whether or not CSS classes come through in the gem files.
// $include-html-classes: true;
// $include-print-styles: true;
// $include-html-global-classes: $include-html-classes;

// Grid

// $include-html-block-grid-classes: $include-html-classes;
// $include-xl-html-grid-classes: false;

// $row-width: rem-calc(1000);
// $total-columns: 12;

// Global

// We use these to define default font weights
$font-weight-normal: normal;
$font-weight-bold: bold;

// We use these to control various global styles
$body-bg: white;
$body-font-color: #222222;
$body-font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif;
$body-font-weight: $font-weight-normal;
$body-font-style: normal;

// We use this to control font-smoothing
// $font-smoothing: antialiased;

// We use these to control text direction settings
// $text-direction: ltr;
// $opposite-direction: right;
// $default-float: left;

// We use these as default colors throughout
$primary-color: #5d91ff;

// $secondary-color: #e7e7e7;
// $alert-color: #f04124;
// $success-color: #43AC6A;
// $warning-color: #f08a24;
// $info-color: #a0d3e8;

// We use these to make sure border radius matches unless we want it different.
// $global-radius: 3px;
// $global-rounded: 1000px;

// We use these to control inset shadow shiny edges and depressions.
// $shiny-edge-size: 0 1px 0;
// $shiny-edge-color: rgba(#fff, .5);
// $shiny-edge-active-color: rgba(#000, .2);

// $column-gutter: rem-calc(30);

$base-space: 1em; // Create universal white space (e.g. margin, padding, left)

// @group TODO Update/refactor to _functions.scss?
// http://sassmeister.com/gist/942bc495aa572802f3a1
@function blacken($color, $percent) {
    @return mix(black, $color, $percent);
}

@function whiten($color, $percent) {
    @return mix(white, $color, $percent);
}

// @group TODO Update/refactor to _functions.scss?

::-webkit-search-cancel-button {
    -webkit-appearance: none;
}

::-webkit-search-cancel-button {
    &:hover {
        color: $primary-color;
    }
    &::after {
        content: '\e803';
        font-family: fontello;
        right: $base-space / 2;
        position: absolute;
        top: 50%;
        line-height: 1;
        // == $base-font-size, not $base-line-height, to vertically align
        margin-top: -.5em;
    }
}

html,
body {
    font-size: $base-font-size;
}

// Default body styles
body {
    background: $body-bg;
    color: $body-font-color;
    padding: 0;
    margin: 0;
    font-family: $body-font-family;
    font-weight: $body-font-weight;
    font-style: $body-font-style;
    line-height: $base-line-height;
    // Set to $base-line-height to take on browser default of 150%
    // position: relative; // TODO Contact Cornelis & report conflict ~ @import "components/content" CSS?
    // cursor: $cursor-default-value;
}

.item-selector {
    form.item-selector__search {
        position: relative;
        label {
            position: relative;
            input[type="search"] {
                // TODO Review/create base form elem styling
                line-height: 2;
                margin: 0;
                // OVERRIDE TODO
                padding-left: $base-space * 1.25;
                position: relative;
                width: 100%;
                &:focus {
                    // TODO Review/create form :focus CSS & abstract
               
                }
            }
            button {
                @include element-invisible;
                // TODO Contact Cornelis, as need accessible no-js fallback
           
            }
            &.focus {
                &::before {
                    color: $primary-color;
                }
            }
            &::before {
                content: '\1f50d';
                font-family: fontello;
                left: 0.5em;
                line-height: 1;
                // == $base-font-size, not $base-line-height, to vertically align
                margin-top: -.5em;
                position: absolute;
                top: 50%;
            }
        }
    }
    form.item-selector__search-result {
        fieldset {
            margin: 0;
            // OVERRIDE TODO
            ul {
                height: auto;
                // TODO Create dynamic height, based on viewport
                overflow: auto;
                li {
                    border-top: 1px solid blacken(white, 10%);
                    label {
                        display: block;
                        line-height: 3;
                        padding: $base-space / 2;
                        // OVERRIDE TODO
                        position: relative;
                        img {
                            @include avatar($border-radius: 3em, $border: 1px solid blacken(white, 50%), $height: 3em, $width: 3em);
                            display: inline-block;
                            vertical-align: top;
                            + div {
                                display: inline-block;
                                line-height: 1.5;
                                // OVERRIDE TODO
                                margin-left: $base-space / 2;
                                max-width: 66%;
                                // NB Create for ellipsis
                                vertical-align: middle;
                                strong {
                                    // TODO Create title attr on elems
                                    @include ellipsis($overflow: hidden, $text-overflow: ellipsis, $white-space: nowrap);
                                    @include font($color: inherit, $font-family: inherit, $font-size: 14px, $font-style: normal, $font-weight: bold, $text-transform: none);
                                    // TODO Create custom type & refactor
                                    display: block;
                                }
                                dfn {
                                    @include ellipsis($overflow: hidden, $text-overflow: ellipsis, $white-space: nowrap);
                                    @include font($color: blacken(white, 50%), $font-family: inherit, $font-size: 14px, $font-style: normal, $font-weight: normal, $text-transform: none);
                                    // TODO Create custom type & refactor
                                    display: block;
                                }
                            }
                        }
                        &.checked {
                            &:hover,
                            &:focus {
                                &::before {
                                    color: $primary-color;
                                }
                            }
                            &::before {
                                content: '\2713';
                                // TODO Create ability to universally theme all icons
                           
                            }
                        }
                        &:hover,
                        &:focus {
                            background-color: blacken(white, 2%);
                        }
                        &::before {
                            content: '';
                            position: absolute;
                            right: $base-space * 2;
                            // KLUDGE Update additional right space to allow for scrollbar
                            top: $base-space / 2;
                        }
                    }
                    &:first-child {
                        border-top: none;
                    }
                }
            }
        }
        .button-bar {
            padding: $base-space;
            // OVERRIDE
       
        }
        &.item-selector__search-result--tags {
            fieldset {
                ul {
                    li {
                        label {
                            img {
                                + div {
                                    strong {
                                        &:before {
                                            content: '#';
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    br {
        display: none;
        // TODO Review accessibility to screen readers?
   
    }
}

.tooltip-container {
    > div {
        margin-bottom: $base-space * 2; // KLUDGE Update for .button-bar
        padding: 0 !important; // OVERRIDE
        position: static !important; // OVERRIDE
        .item-selector {
            .item-selector__search {
                background: $body-bg; // KLUDGE Fixes overlapping transparent form issue
                left: 0;
                position: absolute;
                right: 0;
                top: 0;
                z-index: 1;
                &:after {
                    background-image: -webkit-linear-gradient( $body-bg, transparent);
                    background-image: linear-gradient($body-bg, rgba(255,255,255,0));
                    bottom: -$base-space;
                    content: '';
                    height: $base-space;
                    left: 0;
                    position: absolute;
                    right: 0;
                }
            }
            .item-selector__search-result {
                margin-top: $base-space * 2; // KLUDGE Update for .item-selector__search
                .button-bar {
                    @include respond-min(768px) {
                        background: $body-bg;
                        bottom: 0;
                        left: 0;
                        margin: 0 !important; // OVERRIDE
                        position: absolute;
                        right: 0;
                    }

                    &:before {
                        background-image: -webkit-linear-gradient(transparent, $body-bg);
                        background-image: linear-gradient(rgba(255,255,255,0), $body-bg);
                        content: '';
                        height: $base-space;
                        left: 0;
                        position: absolute;
                        right: 0;
                        top: -$base-space;
                    }
                }
            }
        }
    }
    .pointer {
        display: none !important; // OVERRIDE TODO ~ https://github.com/ploneintranet/ploneintranet.theme/commit/75c3973a0da778bc1c103dcefcb1d39c3bf35158#commitcomment-7301593
        @include respond-min(768px) {
            display: block !important;
            z-index: -1 !important; // FIX TODO Contact Cornelis & merge into core?
        }
    }
}

// TODO:
// Create breakpoint framework
// Create variables for all colour rules & refactor
// Create/delete http://bourbon.io/
// Create/delete http://foundation.zurb.com/
// Create/update .pat-tooltip loader CSS
// Review/create keyboard only navigation
// Transfer .tooltip-container .pointer to a medium breakpoint - it's not required on small
// Update/optimise CSS selectors
// Update/show Search Submit button for users with no JS