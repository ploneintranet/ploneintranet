<tal:block tal:define="portal_state context/@@plone_portal_state;
                       portal_url portal_state/portal_url;
                       is_followed view/is_followed;
                       verb view/verb;
                       unique_id view/unique_id;
                       datapatinject python:'source: fieldset;; target: #functions-{0} fieldset'.format(unique_id)">

  <form id="functions-123456"
        action="@@toggle_follow"
        method="post"
        class="pat-inject"
        tal:attributes="action view/action;
                        id string:functions-${unique_id};
                        data-pat-inject datapatinject;">
    <fieldset class="button-bar centred">
        <button tal:condition="python:view.verb == 'Follow'"
            class="icon-eye ${python:is_followed and 'active' or ''}"
            i18n:attributes="title"
            title="Click to follow ${context/fullname}"
            ><strong>Follow</strong> ${context/fullname}
        </button>
        <button tal:condition="python:view.verb == 'Unfollow'"
            class="icon-eye ${python:is_followed and 'active' or ''}"
            i18n:attributes="title"
            title="You are now following ${context/fullname}. Click to unfollow."
            ><strong>Following</strong></button>

      <input type="hidden" name="do_toggle_follow" value="" />
    </fieldset>
  </form>

</tal:block>
